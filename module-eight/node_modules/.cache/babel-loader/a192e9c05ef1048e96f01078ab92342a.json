{"ast":null,"code":"import _slicedToArray from\"/home/analimazn/Projetos/react-projects/codenation-react-dev/eight-module/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useState}from\"react\";import{Link}from'react-router-dom';import'./Story.scss';var Story=function Story(_ref){var story=_ref.story,user=_ref.user,handleClose=_ref.handleClose;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),metadata=_useState2[0],setMetadata=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),currentTime=_useState4[0],setCurrentTime=_useState4[1];var updateProgress=useCallback(function(){if((metadata===null||metadata===void 0?void 0:metadata.duration)!==null&&currentTime!==null){var elapsedTime=currentTime/metadata.duration*100;return\"\".concat(elapsedTime.toFixed(2),\"%\");}return'0%';},[metadata,currentTime]);return/*#__PURE__*/React.createElement(\"section\",{className:\"story\",\"data-testid\":\"story\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"header\",{className:\"story__header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user\"},/*#__PURE__*/React.createElement(Link,{to:\"/users/\".concat(user.username),className:\"user__thumb\"},/*#__PURE__*/React.createElement(\"img\",{src:user.avatar,alt:user.name})),/*#__PURE__*/React.createElement(Link,{to:\"/users/\".concat(user.username),className:\"user__name\"},user.name)),/*#__PURE__*/React.createElement(\"button\",{className:\"story__close\",onClick:function onClick(){return handleClose();}},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-times\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"story__progress\"},/*#__PURE__*/React.createElement(\"div\",{className:\"story__progress__elapsed\",style:{width:updateProgress()}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"section\",{className:\"story__video__wrapper\"},/*#__PURE__*/React.createElement(\"video\",{autoPlay:true,className:\"video-player\",loop:true,playsInline:true,onTimeUpdate:function onTimeUpdate(e){return setCurrentTime(e.target.currentTime);},onLoadedMetadata:function onLoadedMetadata(e){setMetadata({videoHeight:e.target.videoHeight,videoWidth:e.target.videoWidth,duration:e.target.duration});},src:story.videoUrl}))));};export default Story;","map":{"version":3,"sources":["/home/analimazn/Projetos/react-projects/codenation-react-dev/eight-module/src/components/Story/Story.jsx"],"names":["React","useCallback","useState","Link","Story","story","user","handleClose","metadata","setMetadata","currentTime","setCurrentTime","updateProgress","duration","elapsedTime","toFixed","username","avatar","name","width","e","target","videoHeight","videoWidth","videoUrl"],"mappings":"gMAAA,MAAOA,CAAAA,KAAP,EAAgBC,WAAhB,CAA6BC,QAA7B,KAA6C,OAA7C,CAEA,OAASC,IAAT,KAAqB,kBAArB,CAEA,MAAO,cAAP,CAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAAkC,IAA/BC,CAAAA,KAA+B,MAA/BA,KAA+B,CAAxBC,IAAwB,MAAxBA,IAAwB,CAAlBC,WAAkB,MAAlBA,WAAkB,eACdL,QAAQ,CAAC,IAAD,CADM,wCACvCM,QADuC,eAC7BC,WAD6B,8BAERP,QAAQ,CAAC,IAAD,CAFA,yCAEvCQ,WAFuC,eAE1BC,cAF0B,eAI9C,GAAMC,CAAAA,cAAc,CAAGX,WAAW,CAChC,UAAM,CACJ,GAAI,CAAAO,QAAQ,OAAR,EAAAA,QAAQ,SAAR,QAAAA,QAAQ,CAAEK,QAAV,IAAuB,IAAvB,EAA+BH,WAAW,GAAK,IAAnD,CAAyD,CACvD,GAAMI,CAAAA,WAAW,CAAKJ,WAAW,CAAGF,QAAQ,CAACK,QAAxB,CAAoC,GAAzD,CAEA,gBAAUC,WAAW,CAACC,OAAZ,CAAoB,CAApB,CAAV,MACD,CAED,MAAO,IAAP,CACD,CAT+B,CAS7B,CAACP,QAAD,CAAWE,WAAX,CAT6B,CAAlC,CAWA,mBACE,+BAAS,SAAS,CAAC,OAAnB,CAA2B,cAAY,OAAvC,eACE,2BAAK,SAAS,CAAC,WAAf,eACE,8BAAQ,SAAS,CAAC,eAAlB,eACE,2BAAK,SAAS,CAAC,MAAf,eACE,oBAAC,IAAD,EAAM,EAAE,kBAAYJ,IAAI,CAACU,QAAjB,CAAR,CAAqC,SAAS,CAAC,aAA/C,eACE,2BAAK,GAAG,CAAEV,IAAI,CAACW,MAAf,CAAuB,GAAG,CAAEX,IAAI,CAACY,IAAjC,EADF,CADF,cAIE,oBAAC,IAAD,EAAM,EAAE,kBAAYZ,IAAI,CAACU,QAAjB,CAAR,CAAqC,SAAS,CAAC,YAA/C,EACGV,IAAI,CAACY,IADR,CAJF,CADF,cASE,8BAAQ,SAAS,CAAC,cAAlB,CAAiC,OAAO,CAAE,yBAAMX,CAAAA,WAAW,EAAjB,EAA1C,eACE,yBAAG,SAAS,CAAC,cAAb,EADF,CATF,CADF,cAcE,2BAAK,SAAS,CAAC,iBAAf,eACE,2BAAK,SAAS,CAAC,0BAAf,CACE,KAAK,CAAE,CAAEY,KAAK,CAAEP,cAAc,EAAvB,CADT,EADF,CAdF,CADF,cAsBE,2BAAK,SAAS,CAAC,WAAf,eACE,+BAAS,SAAS,CAAC,uBAAnB,eACE,6BACE,QAAQ,KADV,CAEE,SAAS,CAAC,cAFZ,CAGE,IAAI,KAHN,CAIE,WAAW,KAJb,CAKE,YAAY,CAAE,sBAAAQ,CAAC,QAAIT,CAAAA,cAAc,CAACS,CAAC,CAACC,MAAF,CAASX,WAAV,CAAlB,EALjB,CAME,gBAAgB,CAAE,0BAAAU,CAAC,CAAI,CACrBX,WAAW,CAAC,CACVa,WAAW,CAAEF,CAAC,CAACC,MAAF,CAASC,WADZ,CAEVC,UAAU,CAAEH,CAAC,CAACC,MAAF,CAASE,UAFX,CAGVV,QAAQ,CAAEO,CAAC,CAACC,MAAF,CAASR,QAHT,CAAD,CAAX,CAKD,CAZH,CAaE,GAAG,CAAER,KAAK,CAACmB,QAbb,EADF,CADF,CAtBF,CADF,CA4CD,CA3DD,CA6DA,cAAepB,CAAAA,KAAf","sourcesContent":["import React, { useCallback, useState } from \"react\";\n\nimport { Link } from 'react-router-dom';\n\nimport './Story.scss';\n\nconst Story = ({ story, user, handleClose }) => {\n  const [metadata, setMetadata] = useState(null)\n  const [currentTime, setCurrentTime] = useState(null)\n\n  const updateProgress = useCallback(\n    () => {\n      if (metadata?.duration !== null && currentTime !== null) {\n        const elapsedTime = ((currentTime / metadata.duration) * 100)\n\n        return `${elapsedTime.toFixed(2)}%`\n      }\n\n      return '0%';\n    }, [metadata, currentTime])\n\n  return (\n    <section className=\"story\" data-testid=\"story\">\n      <div className=\"container\">\n        <header className=\"story__header\">\n          <div className=\"user\">\n            <Link to={`/users/${user.username}`} className=\"user__thumb\">\n              <img src={user.avatar} alt={user.name} />\n            </Link>\n            <Link to={`/users/${user.username}`} className=\"user__name\">\n              {user.name}\n            </Link>\n          </div>\n          <button className=\"story__close\" onClick={() => handleClose()}>\n            <i className=\"fas fa-times\"/>\n          </button>\n        </header>\n        <div className=\"story__progress\">\n          <div className=\"story__progress__elapsed\"\n            style={{ width: updateProgress() }}\n          ></div>\n        </div>\n      </div>\n      \n      <div className=\"container\">\n        <section className=\"story__video__wrapper\">\n          <video\n            autoPlay\n            className=\"video-player\"\n            loop\n            playsInline\n            onTimeUpdate={e => setCurrentTime(e.target.currentTime)}\n            onLoadedMetadata={e => {\n              setMetadata({\n                videoHeight: e.target.videoHeight,\n                videoWidth: e.target.videoWidth,\n                duration: e.target.duration\n              });\n            }}\n            src={story.videoUrl}\n          ></video>\n        </section>\n      </div>\n    </section>\n  );\n};\n\nexport default Story;\n"]},"metadata":{},"sourceType":"module"}